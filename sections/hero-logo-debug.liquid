{% comment %}
  HERO – LOGO DEBUG
  Minimal-Section zum Testen: zeigt IMMER im Customizer ein Logo-Feld
  und rendert das Logo rechts-mittig in einem transparenten, festen Container.
{% endcomment %}

{%- liquid
  assign sid = 'hero-logo-debug--' | append: section.id
  assign bg_image = section.settings.bg_image
  assign overlay_alpha = section.settings.overlay_opacity | divided_by: 100.0
-%}

<section id="{{ sid }}" class="hero-logo-debug">
  <style>
    /* ===== Scoped Styles nur für diese Section ===== */
    #{{ sid }} {
      position: relative;
      width: 100%;
      overflow: hidden;
    }
    #{{ sid }} .bg {
      position: absolute;
      inset: 0;
      background-position: center;
      background-size: cover;
      background-repeat: no-repeat;
      {% if bg_image != blank %}
        background-image: url({{ bg_image | image_url: width: 3000 }});
      {% endif %}
      z-index: 0;
    }
    #{{ sid }} .shade {
      position: absolute;
      inset: 0;
      background-color: {{ section.settings.overlay_color | color_modify: 'alpha', overlay_alpha }};
      z-index: 1;
    }
    #{{ sid }} .inner {
      position: relative;
      z-index: 2;
      display: flex;
      align-items: center;
      min-height: {{ section.settings.section_height }}vh;
      padding: 80px 0;
    }
    #{{ sid }} .page-width {
      width: 100%;
      max-width: {{ section.settings.content_max_width }}px;
      margin: 0 auto;
    }
    #{{ sid }} .content {
      max-width: 900px;
      color: #fff;
    }
    #{{ sid }} h1 {
      margin: 0 0 12px;
      line-height: 1.1;
      font-size: {{ section.settings.heading_size }}px;
      color: {{ section.settings.heading_color }};
    }
    #{{ sid }} .text {
      margin: 0;
      line-height: 1.5;
      font-size: {{ section.settings.text_size }}px;
      color: {{ section.settings.text_color }};
      max-width: 60ch;
    }

    /* --- Rechtes Logo im festen, transparenten Container (absolute) --- */
    #{{ sid }} .logo-abs {
      position: absolute;
      top: 50%;
      right: 0;
      transform: translate(calc(0% - var(--logo-offset-x, 0%)),
                           calc(-50% - var(--logo-offset-y, 0%)));
      z-index: 2;
      pointer-events: none;      /* blockiert keine Klicks auf Content links */
      background: transparent;   /* Container ist durchsichtig */
      max-width: var(--logo-maxw, 420px);
      padding: var(--logo-pad, 0px);
    }
    #{{ sid }} .logo-abs img {
      display: block;
      width: 100%;
      height: auto;
    }

    /* Mobile */
    @media (max-width: 768px) {
      #{{ sid }} .inner {
        min-height: {{ section.settings.section_height_mobile }}vh;
        padding: 48px 0;
      }
      #{{ sid }} .content { text-align: center; }
      #{{ sid }} .logo-abs {
        position: static;
        transform: none;
        margin: 24px auto 0;
        pointer-events: auto;
        max-width: min(70vw, var(--logo-maxw, 420px));
      }
    }
  </style>

  <div class="bg"></div>
  <div class="shade"></div>

  <div class="inner">
    <div class="page-width">
      <div class="content">
        {% if section.settings.heading != blank %}
          <h1>{{ section.settings.heading | escape }}</h1>
        {% endif %}
        {% if section.settings.text != blank %}
          <div class="text rte">{{ section.settings.text }}</div>
        {% endif %}
      </div>
    </div>

    {%- if section.settings.logo_image != blank -%}
      <div class="logo-abs"
           style="
             --logo-maxw: {{ section.settings.logo_max_width }}px;
             --logo-pad: {{ section.settings.logo_padding }}px;
             --logo-offset-x: {{ section.settings.logo_offset_x }}%;
             --logo-offset-y: {{ section.settings.logo_offset_y }}%;
           ">
        <img
          src="{{ section.settings.logo_image | image_url: width: 1600 }}"
          alt="{{ section.settings.logo_alt | escape | default: 'Logo' }}"
          loading="lazy">
      </div>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "Hero – Logo Debug",
  "tag": "section",
  "class": "section",
  "settings": [
    { "type": "header", "content": "Hintergrund & Layout" },
    { "type": "image_picker", "id": "bg_image", "label": "Hintergrundbild" },
    { "type": "color", "id": "overlay_color", "label": "Overlay-Farbe", "default": "#2BAAA2" },
    { "type": "range", "id": "overlay_opacity", "label": "Overlay-Deckkraft", "min": 0, "max": 100, "step": 1, "unit": "%", "default": 70 },
    { "type": "range", "id": "section_height", "label": "Höhe (Desktop, in vh)", "min": 40, "max": 100, "step": 5, "unit": "vh", "default": 60 },
    { "type": "range", "id": "section_height_mobile", "label": "Höhe (Mobil, in vh)", "min": 30, "max": 100, "step": 5, "unit": "vh", "default": 40 },
    { "type": "range", "id": "content_max_width", "label": "Inhaltsbreite (px)", "min": 480, "max": 1200, "step": 10, "unit": "px", "default": 760 },

    { "type": "header", "content": "Text" },
    { "type": "text", "id": "heading", "label": "Titel", "default": "Ihre Partner für professionelle Service-Lösungen" },
    { "type": "range", "id": "heading_size", "min": 20, "max": 100, "step": 1, "unit": "px", "label": "Titelgröße", "default": 64 },
    { "type": "color", "id": "heading_color", "label": "Titelfarbe", "default": "#FFFFFF" },
    { "type": "richtext", "id": "text", "label": "Text", "default": "<p>Zwei spezialisierte Unternehmen unter einem Dach. Ihr Experte und Dienstleistungspartner auf höchstem Niveau.</p>" },
    { "type": "range", "id": "text_size", "min": 12, "max": 40, "step": 1, "unit": "px", "label": "Textgröße", "default": 20 },
    { "type": "color", "id": "text_color", "label": "Textfarbe", "default": "#FFFFFF" },

    { "type": "header", "content": "Rechtes Logo (fester Container)" },
    { "type": "image_picker", "id": "logo_image", "label": "Logo-Bild" },
    { "type": "text", "id": "logo_alt", "label": "Alt-Text", "default": "Logo" },
    { "type": "range", "id": "logo_max_width", "label": "Max. Logo-Breite (px)", "min": 120, "max": 900, "step": 10, "unit": "px", "default": 420 },
    { "type": "range", "id": "logo_padding", "label": "Innenabstand (px)", "min": 0, "max": 40, "step": 2, "unit": "px", "default": 0 },
    { "type": "range", "id": "logo_offset_x", "label": "X-Versatz nach links (+) in %", "min": 0, "max": 20, "step": 1, "unit": "%", "default": 4 },
    { "type": "range", "id": "logo_offset_y", "label": "Y-Versatz nach oben (+) in %", "min": -20, "max": 20, "step": 1, "unit": "%", "default": 0 }
  ],
  "presets": [
    { "name": "Hero – Logo Debug" }
  ]
}
{% endschema %}
